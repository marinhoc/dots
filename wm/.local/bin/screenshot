#!/bin/sh
#
# screenshot - select an area to screenshot

readonly FORMAT=%F_%H-%M-%S
readonly DIR=~/medias/pics/scrots

border_color=$(bspc config focused_border_color)
border_width=$(bspc config border_width)

# select area
geometry=$(
    hacksaw \
        -c "$border_color" \
        -s "$border_width" \
        -n
) 2> /dev/null && {
    mkdir -p "$DIR"

    name=$(date "+$FORMAT").png

    # take screenshot
    shotgun -g "$geometry" \
        "$DIR/$name"
    # send screenshot to clipboard
    xclip -selection clipboard -target image/png \
        "$DIR/$name"

    notify-send "Screenshot saved as $name"
}
